/**
 * Lite Datatable 1.0
 * https://github.com/joaofbvieira/lite-datatable-js
 * Copyright (c) 2018 Jo√£o Pedro Vieira
 */
function LiteDataTable(){this.table=null,this.numberOfRecords=0,this.numberOfPages=0,this.recordsPerPage=0,this.currentPage=1,this.searchText="",this.uniqueId="",this.firstPageClass="",this.previousPageClass="",this.currentPageClass="",this.nextPageClass="",this.lastPageClass="",this.selectRecordsPerPageClass="",this.searchTextClass="",this.tableLinesClass="",this.linesToRender=null,this.optionsRecordsPerPage=0,this.searchText_isWaiting=!1,this.searchText_currentTimeout=null,this.currentSearchText="",this.captionLabelRecordsPerPage="",this.captionSearchInput="",this.captionButtonFirstPage="",this.captionButtonPreviousPage="",this.captionButtonNextPage="",this.captionButtonLastPage="",this.showRecordsPerPage=!0,this.showSearchInput=!0,this.cssClassForRecordsPerPageContainer="",this.cssClassForSearchTextContainer="",this.cssClassForContainerTopFields="",this.cssClassForContainerBottomFields="",this.cssClassForButtonFirstPage="",this.cssClassForButtonPreviousPage="",this.cssClassForButtonNextPage="",this.cssClassForButtonLastPage="",this.cssClassForSpanCurrentPage="",this.cssClassForInputSearch="",this.cssClassForSelectRecordsPerPage="",this.cssClassForLabelRecordsPerPage=""}LiteDataTable.prototype.init=function(e){this.loadParameters(e),this.generateAndSetUniqueId(),this.configureTableLines(),this.applyFilterToTableLines(),this.calculatePagesAndRecords(),this.render()},LiteDataTable.prototype.loadParameters=function(e){this.table=e.table,e.recordsPerPage?this.recordsPerPage=e.recordsPerPage:this.recordsPerPage=10,e.optionsRecordsPerPage?this.optionsRecordsPerPage=e.optionsRecordsPerPage:this.optionsRecordsPerPage=[10,50,100],this.optionsRecordsPerPage.indexOf(this.recordsPerPage)<0&&this.optionsRecordsPerPage.push(this.recordsPerPage),e.captionLabelRecordsPerPage?this.captionLabelRecordsPerPage=e.captionLabelRecordsPerPage:this.captionLabelRecordsPerPage="Records per page:",e.captionSearchInput?this.captionSearchInput=e.captionSearchInput:this.captionSearchInput="Search",e.captionButtonFirstPage?this.captionButtonFirstPage=e.captionButtonFirstPage:this.captionButtonFirstPage="<<",e.captionButtonPreviousPage?this.captionButtonPreviousPage=e.captionButtonPreviousPage:this.captionButtonPreviousPage="<",e.captionButtonNextPage?this.captionButtonNextPage=e.captionButtonNextPage:this.captionButtonNextPage=">",e.captionButtonLastPage?this.captionButtonLastPage=e.captionButtonLastPage:this.captionButtonLastPage=">>",null!=e.showRecordsPerPage?this.showRecordsPerPage=e.showRecordsPerPage:this.showRecordsPerPage=!0,null!=e.showSearchInput?this.showSearchInput=e.showSearchInput:this.showSearchInput=!0,e.cssClassForRecordsPerPageContainer?this.cssClassForRecordsPerPageContainer=e.cssClassForRecordsPerPageContainer:this.cssClassForRecordsPerPageContainer="",e.cssClassForSearchTextContainer?this.cssClassForSearchTextContainer=e.cssClassForSearchTextContainer:this.cssClassForSearchTextContainer=""},LiteDataTable.prototype.render=function(){var e=this;$(e.table).before(e.getTopComponentHTML()),$(e.table).after(e.getBottomComponentHTML()),e.bindDomEvents(),e.setCurrentPage(1)},LiteDataTable.prototype.configureTableLines=function(){$(this.table).find("tbody tr:visible").addClass(this.tableLinesClass)},LiteDataTable.prototype.bindDomEvents=function(){var t=this;$("."+t.firstPageClass).click(function(){t.firstPage_onClick()}),$("."+t.previousPageClass).click(function(){t.previousPage_onClick()}),$("."+t.nextPageClass).click(function(){t.nextPage_onClick()}),$("."+t.lastPageClass).click(function(){t.lastPage_onClick()}),$("."+t.selectRecordsPerPageClass).change(function(){t.selectRecordsPerPage_onChange()}),$("."+t.searchTextClass).keyup(function(e){40!=e.keyCode&&38!=e.keyCode&&13!=e.keyCode&&(t.searchText_isWaiting&&clearTimeout(t.searchText_currentTimeout),t.searchText_currentTimeout=setTimeout(function(){t.searchText_onKeyUp()},500),t.searchText_isWaiting=!0)})},LiteDataTable.prototype.calculatePagesAndRecords=function(){var e=this;e.numberOfRecords=e.linesToRender.length,e.numberOfPages=Math.ceil(e.numberOfRecords/e.recordsPerPage)},LiteDataTable.prototype.getBottomComponentHTML=function(){var e="";return this.numberOfPages<=1&&(e='disabled="disabled"'),' <div class="'+this.cssClassForContainerBottomFields+'" >                     <a class="'+this.cssClassForButtonFirstPage+" "+this.firstPageClass+'" disabled="disabled"> '+this.captionButtonFirstPage+' </a>                     <a class="'+this.cssClassForButtonPreviousPage+" "+this.previousPageClass+'" disabled="disabled"> '+this.captionButtonPreviousPage+' </a>                     <span class="'+this.cssClassForSpanCurrentPage+" "+this.currentPageClass+'"> 1 / '+this.numberOfPages+' </span>                     <a class="'+this.cssClassForButtonNextPage+" "+this.nextPageClass+'" '+e+"> "+this.captionButtonNextPage+' </a>                     <a class="'+this.cssClassForButtonLastPage+" "+this.lastPageClass+'" '+e+"> "+this.captionButtonLastPage+" </a>                 </div>"},LiteDataTable.prototype.getTopComponentHTML=function(){var a=this,r="";a.numberOfPages;var e=" display: block; ";a.showRecordsPerPage||(e=" display: none; ");var t=" display: block; ";a.showSearchInput||(t=" display: none; ");var s=" display: block; ";a.showSearchInput||a.showRecordsPerPage||(s=" display: none; "),a.optionsRecordsPerPage.sort(function(e,t){return e-t});var i="float: left;";""!=a.cssClassForRecordsPerPageContainer&&(i="");var o="float: right;";""!=a.cssClassForSearchTextContainer&&(o="");var n="width: 100%; margin-top: 10px; margin-bottom: 10px; height: 40px;";""!=a.cssClassForContainerTopFields&&(n="");var c="float: left; vertical-align: middle; line-height: 35px;";""!=a.cssClassForLabelRecordsPerPage&&(c="");var l="float: left; width: auto; margin-left: 5px;";return""!=a.cssClassForSelectRecordsPerPage&&(l=""),r=' <div class="'+a.cssClassForContainerTopFields+'" style="'+n+" "+s+'">                     <div class="'+a.cssClassForRecordsPerPageContainer+'" style="'+i+" "+e+'">                         <span class="'+a.cssClassForLabelRecordsPerPage+'" style="'+c+'">'+a.captionLabelRecordsPerPage+'</span>                         <select class="'+a.cssClassForSelectRecordsPerPage+" "+a.selectRecordsPerPageClass+'" style="'+l+'">',$.each(a.optionsRecordsPerPage,function(e,t){var s="";t==a.recordsPerPage&&(s='selected="selected"'),r+='<option value="'+t+'" '+s+">"+t+"</option>"}),r+='        </select>                     </div>                     <div class="'+a.cssClassForSearchTextContainer+'" style="'+o+" "+t+'">                         <input type="text" class="'+a.searchTextClass+" "+a.cssClassForInputSearch+'" placeholder="'+a.captionSearchInput+'" />                     </div>                 </div> '},LiteDataTable.prototype.generateAndSetUniqueId=function(){this.uniqueId="_"+Math.random().toString(36).substr(2,9),this.firstPageClass=this.uniqueId+"-first-page",this.previousPageClass=this.uniqueId+"-previous-page",this.currentPageClass=this.uniqueId+"-actual-page",this.nextPageClass=this.uniqueId+"-next-page",this.lastPageClass=this.uniqueId+"-last-page",this.selectRecordsPerPageClass=this.uniqueId+"-select-records-per-page",this.searchTextClass=this.uniqueId+"-input-search-text",this.tableLinesClass=this.uniqueId+"-lines-table-to-paginate"},LiteDataTable.prototype.firstPage_onClick=function(){this.setCurrentPage(1)},LiteDataTable.prototype.previousPage_onClick=function(){if(1==this.currentPage)return!1;this.setCurrentPage(this.currentPage-1)},LiteDataTable.prototype.nextPage_onClick=function(){if(this.currentPage==this.numberOfPages)return!1;this.setCurrentPage(this.currentPage+1)},LiteDataTable.prototype.lastPage_onClick=function(){this.setCurrentPage(this.numberOfPages)},LiteDataTable.prototype.selectRecordsPerPage_onChange=function(){this.recordsPerPage=$("."+this.selectRecordsPerPageClass).val(),this.calculatePagesAndRecords(),this.setCurrentPage(1)},LiteDataTable.prototype.searchText_onKeyUp=function(){var e=$("."+this.searchTextClass).val();if((e=this.parseSearchText(e))==this.currentSearchText)return!0;this.currentSearchText=e,this.applyFilterToTableLines(),this.calculatePagesAndRecords(),this.setCurrentPage(1)},LiteDataTable.prototype.setCurrentPage=function(e){var t=this;t.currentPage=e,$("."+t.tableLinesClass).hide();var s=t.currentPage*t.recordsPerPage-t.recordsPerPage,a=t.currentPage*t.recordsPerPage;$(t.linesToRender).slice(s,a).show(),t.updateCaptionAndStateOfPaginator()},LiteDataTable.prototype.updateCaptionAndStateOfPaginator=function(){var e=this;$("."+e.currentPageClass).text(e.currentPage+" / "+e.numberOfPages),$("."+e.firstPageClass).removeAttr("disabled"),$("."+e.previousPageClass).removeAttr("disabled"),$("."+e.nextPageClass).removeAttr("disabled"),$("."+e.lastPageClass).removeAttr("disabled"),1==e.currentPage&&($("."+e.firstPageClass).attr("disabled","disabled"),$("."+e.previousPageClass).attr("disabled","disabled")),e.currentPage==e.numberOfPages&&($("."+e.nextPageClass).attr("disabled","disabled"),$("."+e.lastPageClass).attr("disabled","disabled"))},LiteDataTable.prototype.parseSearchText=function(e){if(null==e||null==e)return"";e=(e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")).toLowerCase();var t={a:/[\xE0-\xE6]/g,e:/[\xE8-\xEB]/g,i:/[\xEC-\xEF]/g,o:/[\xF2-\xF6]/g,u:/[\xF9-\xFC]/g,c:/\xE7/g,n:/\xF1/g};for(var s in t){var a=t[s];e=e.replace(a,s)}return e},LiteDataTable.prototype.applyFilterToTableLines=function(){var s=this,e=$("."+s.tableLinesClass);""!=s.currentSearchText?s.linesToRender=e.filter(function(e,t){return 0<=s.parseSearchText($(t).text()).indexOf(s.currentSearchText)}):s.linesToRender=e};
